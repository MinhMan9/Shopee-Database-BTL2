{% extends "base.html" %}

{% block title %}Danh S√°ch S·∫£n Ph·∫©m - K√™nh B√°n H√†ng{% endblock %}

{% block content %}
    <div style="margin-bottom: 20px;">
        <a href="{{ url_for('seller_dashboard') }}" class="btn btn-secondary">‚¨ÖÔ∏è Quay l·∫°i Dashboard</a>
    </div>

    <h2>üì¶ Qu·∫£n L√Ω S·∫£n Ph·∫©m</h2>
    
    <div style="margin-bottom: 15px;">
        <a href="{{ url_for('add_product') }}" class="btn btn-success">‚ûï Th√™m S·∫£n Ph·∫©m M·ªõi</a>
    </div>
    
    <!-- Form T√¨m ki·∫øm & L·ªçc -->
    <form method="GET" action="{{ url_for('seller_products') }}" style="margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 5px;">
        <div style="display: flex; gap: 10px;">
            <input type="text" name="keyword" placeholder="T√¨m t√™n s·∫£n ph·∫©m..." value="{{ current_keyword }}" style="padding: 8px; width: 300px;">
            
            <select name="status_filter" style="padding: 8px;">
                <option value="">-- T·∫•t c·∫£ tr·∫°ng th√°i --</option>
                <option value="C√≤n h√†ng" {% if current_status == 'C√≤n h√†ng' %}selected{% endif %}>C√≤n h√†ng (Stock > 0)</option>
                <option value="H·∫øt h√†ng" {% if current_status == 'H·∫øt h√†ng' %}selected{% endif %}>H·∫øt h√†ng</option>
                <option value="Ng·ª´ng kinh doanh" {% if current_status == 'Ng·ª´ng kinh doanh' %}selected{% endif %}>Ng·ª´ng kinh doanh</option>
            </select>
            
            <button type="submit" style="padding: 8px 15px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">L·ªçc</button>
            <a href="{{ url_for('seller_products') }}" style="padding: 8px 15px; background: #6c757d; color: white; text-decoration: none; border-radius: 4px;">Reset</a>
        </div>
    </form>

    <style>
        .table th, .table td {
            padding: 12px 15px; /* TƒÉng kho·∫£ng c√°ch ƒë·ªám trong √¥ */
            text-align: left;
        }
        .table {
            width: 100%; /* ƒê·∫£m b·∫£o b·∫£ng r·ªông 100% */
            border-collapse: collapse;
        }
    </style>

    <table class="table table-bordered">
        <thead>
            <tr>
                {% for col in columns %}
                    <th>{{ col }}</th>
                {% endfor %}
                <th>H√†nh ƒë·ªông</th>
            </tr>
        </thead>
        <tbody>
            {% for product in products %}
            <tr>
                {% for col in columns %}
                    <td>
                        {% if col == 'price' or col == 'sub_total' or col == 'total_payment' %}
                            {{ product[col] | format_currency }}
                        {% else %}
                            {{ product[col] }}
                        {% endif %}
                    </td>
                {% endfor %}
                <td>
                    <a href="{{ url_for('edit_product', prod_id=product['prod_id']) }}" class="btn btn-sm btn-warning">S·ª≠a</a>
                    <form action="{{ url_for('delete_product', prod_id=product['prod_id']) }}" method="POST" style="display:inline;" onsubmit="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a?');">
                        <button type="submit" class="btn btn-sm btn-danger">X√≥a</button>
                    </form>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="{{ columns|length + 1 }}" style="text-align: center;">Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m n√†o.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

{% endblock %}
